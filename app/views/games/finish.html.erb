<!DOCTYPE html>
<html>
<head>
  <title>Fin del Juego</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body style="background-color: <%= @game.background_color %>;">

<div class="relative min-h-screen flex flex-col items-center justify-center overflow-hidden">
  <div class="absolute inset-0 overflow-hidden">
    <svg class="absolute top-0 left-0 w-full h-40" viewBox="0 0 1440 320" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill="<%= @game.text_color %>" fill-opacity="0.6" d="M0,128L80,112C160,96,320,64,480,85.3C640,107,800,181,960,197.3C1120,213,1280,171,1360,149.3L1440,128V0H0Z"></path>
    </svg>
    <svg class="absolute bottom-0 left-0 w-full h-40" viewBox="0 0 1440 320" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill="<%= @game.text_color %>" fill-opacity="0.6" d="M0,160L80,165.3C160,171,320,181,480,165.3C640,149,800,107,960,96C1120,85,1280,107,1360,117.3L1440,128V320H0Z"></path>
    </svg>
    <div class="absolute inset-0 bg-pattern"></div>
  </div>

  <div class="bg-white shadow-lg rounded-lg p-6 w-full max-w-2xl relative z-10">
    <h1 class="text-3xl font-bold text-center mb-4" style="color: <%= @game.header_color %>;">
      <%= @game.end_text %>
    </h1>

    <p class="text-xl text-center" style="color: <%= @game.text_color %>;">
      Tiempo de juego: <%= @elapsed_time.to_i %> segundos
    </p>

    <% if @winner %>
      <p class="text-xl text-center mt-4" style="color: <%= @game.text_color %>;">
        ¡<%= @winner.first_name %> ha ganado con <%= @winner_score %> puntos!
      </p>
    <% else %>
      <p class="text-xl text-center mt-4" style="color: <%= @game.text_color %>;">
        ¡El juego ha terminado en empate!
      </p>
    <% end %>

    <div class="mt-6 flex justify-center">
      <a href="<%= new_game_player_path(@game, locale: I18n.locale.to_s) %>" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition-transform" style="background-color: <%= @game.header_color %>;">
        Jugar de Nuevo
      </a>
    </div>
  </div>
</div>

<style>
  /* Fondo de rombos */
  .bg-pattern {
    background-image: linear-gradient(45deg, <%= @game.text_color %> 25%, transparent 25%, transparent 75%, <%= @game.text_color %> 75%),
                      linear-gradient(-45deg, <%= @game.text_color %> 25%, transparent 25%, transparent 75%, <%= @game.text_color %> 75%);
    background-size: 40px 40px;
    background-position: 0 0, 20px 20px;
    opacity: 0.1;
  }
</style>

</body>
</html>
