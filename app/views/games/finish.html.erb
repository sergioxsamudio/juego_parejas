<div class="fixed inset-0 -z-10">
  <% if @game.background_image.attached? %>
    <div class="fixed inset-0 -z-10"
         style="background-image: url('<%= url_for(@game.background_image) %>');
                 background-size: cover;
                 background-position: center;">
    </div>
  <% else %>
    <div class="fixed inset-0 -z-10" style="background-color: <%= @game.background_color.presence || '#eeeeee' %>;">
      <svg class="absolute top-0 left-0 w-full h-40" viewBox="0 0 1440 320" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill="<%= @game.text_color %>" fill-opacity="0.6"
              d="M0,128L80,112C160,96,320,64,480,85.3C640,107,800,181,960,197.3C1120,213,1280,171,1360,149.3L1440,128V0H0Z">
        </path>
      </svg>
      <svg class="absolute bottom-0 left-0 w-full h-40" viewBox="0 0 1440 320" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill="<%= @game.text_color %>" fill-opacity="0.6"
              d="M0,160L80,165.3C160,171,320,181,480,165.3C640,149,800,107,960,96C1120,85,1280,107,1360,117.3L1440,128V320H0Z">
        </path>
      </svg>
      <div class="absolute inset-0 bg-pattern"></div>
    </div>
  <% end %>
</div>

<body class="m-0 p-0">
  <div class="min-h-screen w-full flex items-center justify-center px-4 relative z-10">
    <div class="bg-white shadow-2xl rounded-2xl p-8 w-full max-w-3xl text-center">
      <h1 class="text-4xl sm:text-5xl font-extrabold mb-6" style="color: <%= @game.header_color %>;">
        <%= t('games.finish.title') %>
      </h1>

      <% if @resultado_del_juego.present? %>
        <div class="py-6 px-8 rounded-xl mb-8" style="background-color: rgba(<%= Color::RGB.from_html(@game.header_color).red %>, <%= Color::RGB.from_html(@game.header_color).green %>, <%= Color::RGB.from_html(@game.header_color).blue %>, 0.8);">
          <p class="text-3xl sm:text-4xl font-bold text-white drop-shadow-md">
            <%= @resultado_del_juego %>
          </p>
          <%# if @winner.present? && @winner_score.present? %>
          <%#   <p class="text-xl sm:text-2xl text-white opacity-70 mt-2"> %>
          <%#     <%= t('games.finish.winner_score', winner_name: @winner.first_name, score: @winner_score) %>
          <%#   </p> %>
          <%# end %>
        </div>
      <% end %>

      <p class="text-lg sm:text-xl italic" style="color: <%= @game.text_color %>;">
        <%= @game.end_text %>
      </p>

      <div class="flex justify-center mt-8">
        <%= link_to start_game_path(@game, locale: I18n.locale),
            class: "flex items-center justify-center text-white font-bold text-3xl sm:text-4xl px-8 py-4 shadow-2xl transition-transform transform hover:scale-105 text-center",
            style: "background-color: #{@game.header_color};" do %>
          <img src="<%= asset_path('icon-home.png') %>" alt="Play" class="w-12 h-12 sm:w-14 sm:h-14 mr-2" />
          <span><%= t('games.finish.back_to_start').gsub(' ', '<br>').html_safe %></span>
        <% end %>
      </div>
      <% unless @game.background_image.attached? %>
        <style>
          .bg-pattern {
            background-image: linear-gradient(45deg, <%= @game.text_color %> 25%, transparent 25%, transparent 75%, <%= @game.text_color %> 75%),
                              linear-gradient(-45deg, <%= @game.text_color %> 25%, transparent 25%, transparent 75%, <%= @game.text_color %> 75%);
            background-size: 40px 40px;
            background-position: 0 0, 20px 20px;
            opacity: 0.1;
          }
        </style>
      <% end %>
    </div>
  </div>
</body>
